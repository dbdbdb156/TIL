# 쓰레드 동기화
### 쓰레드 동기화 방법
 1) 실행 순서의 동기화
  : 스레드의 실생순서를 정의하고, 이 순서에 반드시 따르도록 하는 것

 2) 메모리 접근에 대한 동기화
  - 메모리 접근에 있어서 동시 접근을 막으면 됨
  - 한 순간에 한 쓰레드만 접근하게

### * 동기화 기법의 종류
 1) 유저 모드 동기화
 - 커널의 힘을 빌리지 않는 동기화 기법(커널 코드가 실행되지 않음)
 - 성능상 이점, 기능상의 제한
 2) kernel 모드 동기화
 - 커널에서 제공하는 동기화 기능을 활용
 - 커널모드로 변경이 필요하고, 성능저하로 이어짐. 다양한 기능 활용
  ex) 뮤텍스 기반의 동기화, 세마포어 기반의 동기화, 이름 있는 뮤텍스 기반의 프로세스 동기화, 이벤트 기반의 동기화

# 쓰레드 동기화 종류 - 메모리 접근에 대한 동기화
 - 임계 영역의 접근을 동기화
 - 임계영역 = Critical Section
  1) 전역변수에 둘 이상의 쓰레드가 동시에 접근해서 연산하면 문제 발생
   => 이러한 문제를 일으키는 코드 블록을 가리켜 임계 영역이라고 한다.
  2) 문제의 원인이 되는 코드 블록을 가리켜 임계영역
   - 전역변수 자체에 할당된 메모리 공간을 가리켜 임계영역이라 하는거 아님
   - 임계영역은 한줄일수도, 여러 줄을 묶어 임계영역이라고도 할 수 있다.
  3) 임계영역이란 배타적 접근(한 순간에 하나의 쓰레드만 접근)이 요구되는 공유 리소스(전역변수와 같은)에 접근하는 코드 블록을 의미한다.
 * 해결책
  - 임계영역의 동시 접근을 막으면 됩니다.

### * 유저 모드 동기화
1. 크리티컬 섹션 기반의 동기화(임계영역)
 - key를 두고 사용하는 쓰레드만 사용하고 사용후에 key를 반납
2. 인터락(Interlocked family of function) 기반의 동기화
 - 위 용도로 특화된 인터락 함수를 사ᅟᅭᆼ하는 것.

### * 커널 모드 동기화
1. 뮤텍스 : 누군가에 의해 획득이 가능할 때 Signaled 상태에 놓임
 - 커널에서 뮤텍스 커널 오브젝트와 프로세스 관리.  

2. 세마포어 : 뮤텍스는 세마포어의 일종. 차이는 세마포어에는 count 기능이 있음
- 세마포어는 임계영역에 접근 가능한 쓰레드 개수를 조절하는 기능이 있음.
=> 임계영역의 접근 허용 쓰레드 개수를 하나로 제한하기 위해 사용되는 “바이너리 세마포어” = 뮤텍스와 동일한 기능 제공
- count 가 0일 경우 non_signaled 상태, 1 이상이면 signaled 상태

3. 이름있는 뮤텍스(Named Mutex) 기반의 프로세스 동기화
-> 이름을 부여한다는 것은 어떤 용도인가
- 뮤텍스는 커널의 소유다. 즉, 운영체제의 소유다.
=> 다른 프로세스간에 자원을 공유하지 않지만, 커널에서 프로세스도, 뮤텍스도 관리하기에 다른 프로세스간에 핸들이 가능하다.
